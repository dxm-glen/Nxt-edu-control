# 📊 Database Settings - 데이터베이스 설정 도구

> **MySQL/MariaDB 환경에서 교육용 다중 데이터베이스 및 사용자 자동 생성 도구**

이 모듈은 클래식 아키텍처 기반의 MySQL/MariaDB 데이터베이스에서 교육 목적으로 다수의 데이터베이스와 사용자 계정을 자동으로 생성하는 도구입니다. 각 학습자별로 독립적인 데이터베이스 환경을 제공합니다.

## 🎯 주요 기능

### 📝 **자동화된 데이터베이스 환경 구축**

- **다중 데이터베이스 생성**: `db_01` ~ `db_55` 형태로 순차 생성
- **전용 사용자 계정**: 각 데이터베이스별 독립적인 사용자 계정
- **초기 데이터 삽입**: 명언 텍스트를 포함한 샘플 데이터 자동 생성
- **권한 관리**: 사용자별 해당 데이터베이스에 대한 전체 권한 부여

### 🏗️ **생성되는 리소스 구조**

```
데이터베이스: db_00, db_01, db_02, ..., db_55
사용자명:    user_00, user_01, user_02, ..., user_55
비밀번호:    pw_00, pw_01, pw_02, ..., pw_55
```

## 📁 파일 설명

### `classic-architecture-db.py`

**MySQL/MariaDB 다중 DB 생성 스크립트**

- **데이터베이스 생성**: 지정된 수만큼 순차적으로 데이터베이스 생성
- **사용자 관리**: 각 DB별 전용 사용자 계정 생성 및 권한 부여
- **테이블 초기화**: `texts` 테이블 생성 및 명언 데이터 삽입
- **대량 처리**: 기본 56개(0~55) 데이터베이스 환경 구축

## 🚀 사용법

### 1. 환경 준비

```bash
# 필수 패키지 설치
pip install boto3 pymysql
```

### 2. 데이터베이스 연결 정보 설정

스크립트 상단의 연결 정보를 실제 환경에 맞게 수정:

```python
# RDS 연결 정보
rds_host = "your-mysql-host.amazonaws.com"      # MySQL/MariaDB 호스트
db_username = "admin"                           # 관리자 계정
db_password = "your-admin-password"             # 관리자 비밀번호
db_name = "texts"                               # 기본 데이터베이스
```

### 3. 스크립트 실행

```bash
python3 classic-architecture-db.py
```

### 4. 생성 결과 확인

각 데이터베이스에 다음과 같은 구조가 생성됩니다:

```sql
-- 데이터베이스: db_01
-- 사용자: user_01 (비밀번호: pw_01)
-- 테이블: texts

SELECT * FROM texts;
+----+----------------------------------------------------------+----------------+
| id | text                                                     | username       |
+----+----------------------------------------------------------+----------------+
|  1 | 언제나 현재에 집중할수 있다면 행복할것이다...아마도...     | 파울로 코엘료   |
|  2 | 어리석은 자는 멀리서 행복을 찾고, 현명한 자는...          | 제임스 오펜하임 |
|  3 | 성공의 비결은 단 한 가지, 잘할 수 있는 일에...           | 톰 모나건      |
+----+----------------------------------------------------------+----------------+
```

## ⚙️ 설정 옵션

### 생성할 데이터베이스 수 변경

```python
number_of_users = 30  # 31개 데이터베이스 생성 (0~30)
```

### 테이블 구조 커스터마이징

`create_database_and_user()` 함수 내에서 테이블 생성 및 초기 데이터 수정 가능:

```python
# 테이블 생성
cursor.execute(
    "CREATE TABLE IF NOT EXISTS your_table (id INT AUTO_INCREMENT PRIMARY KEY, ...);"
)

# 초기 데이터 삽입
cursor.execute(
    "INSERT INTO your_table (column1, column2) VALUES ('value1', 'value2');"
)
```

## 🔧 기술 스택

- **Python 3.x**: 메인 개발 언어
- **PyMySQL**: MySQL 데이터베이스 연결
- **boto3**: AWS 서비스 연동 (필요시)
- **MySQL/MariaDB**: 대상 데이터베이스

## 📋 사용 시나리오

### 🎓 **데이터베이스 교육 과정**

1. **개별 실습 환경**: 학습자별 독립적인 DB 환경 제공
2. **SQL 기초 학습**: CRUD 연산 실습용 샘플 데이터
3. **권한 관리 학습**: 사용자별 권한 분리 체험

### 🏢 **개발 환경 구축**

1. **테스트 환경**: 다중 테스트 데이터베이스 환경
2. **프로토타이핑**: 빠른 개발 환경 구축
3. **격리된 환경**: 각 개발자별 전용 DB 환경

## ⚠️ 주의사항

### 보안 고려사항

- **관리자 권한 필요**: 데이터베이스 및 사용자 생성을 위한 관리자 계정 필요
- **연결 정보 보호**: DB 연결 정보를 환경변수로 관리 권장
- **비밀번호 정책**: 프로덕션 환경에서는 강력한 비밀번호 정책 적용

### 리소스 관리

- **대량 생성 주의**: 기본 56개 DB 생성으로 리소스 사용량 고려
- **정리 작업**: 교육 완료 후 불필요한 DB 및 사용자 정리 필요
- **백업 계획**: 중요한 데이터가 있을 경우 백업 계획 수립

## 🔄 확장 가능성

### 환경변수 지원

```python
# 향후 개선 예정
rds_host = os.getenv("DB_HOST", "localhost")
db_username = os.getenv("DB_USER", "admin")
db_password = os.getenv("DB_PASSWORD", "password")
number_of_users = int(os.getenv("USER_COUNT", "55"))
```

### 다중 DB 엔진 지원

- PostgreSQL 지원 추가
- SQLite 로컬 환경 지원
- 클라우드 DB 서비스 연동

---

> 💡 **팁**: 대량의 데이터베이스를 생성하기 전에 소수의 테스트 환경에서 먼저 검증해보세요!

_이 도구는 NXTCloud 교육팀의 데이터베이스 교육 효율성 향상을 위해 개발되었습니다._
